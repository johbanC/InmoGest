!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).metisMenu=t(e.$)}(this,(function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e);const i=(e=>{const t="transitionend",n={TRANSITION_END:"mmTransitionEnd",triggerTransitionEnd(n){e(n).trigger(t)},supportsTransitionEnd:()=>Boolean(t)};function i(t){let i=!1;return e(this).one(n.TRANSITION_END,(()=>{i=!0})),setTimeout((()=>{i||n.triggerTransitionEnd(this)}),t),this}return e.fn.mmEmulateTransitionEnd=i,e.event.special[n.TRANSITION_END]={bindType:t,delegateType:t,handle(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}},n})(n.default),r="metisMenu",s="metisMenu",a=`.${s}`,o=n.default.fn[r],l={toggle:!0,preventDefault:!0,triggerElement:"a",parentTrigger:"li",subMenu:"ul"},d={SHOW:`show${a}`,SHOWN:`shown${a}`,HIDE:`hide${a}`,HIDDEN:`hidden${a}`,CLICK_DATA_API:`click${a}.data-api`},g="metismenu",h="mm-active",f="mm-show",u="mm-collapse",c="mm-collapsing";class m{constructor(e,t){this.element=e,this.config={...l,...t},this.transitioning=null,this.init()}init(){const e=this,t=this.config,i=n.default(this.element);i.addClass(g),i.find(`${t.parentTrigger}.${h}`).children(t.triggerElement).attr("aria-expanded","true"),i.find(`${t.parentTrigger}.${h}`).parents(t.parentTrigger).addClass(h),i.find(`${t.parentTrigger}.${h}`).parents(t.parentTrigger).children(t.triggerElement).attr("aria-expanded","true"),i.find(`${t.parentTrigger}.${h}`).has(t.subMenu).children(t.subMenu).addClass(`${u} ${f}`),i.find(t.parentTrigger).not(`.${h}`).has(t.subMenu).children(t.subMenu).addClass(u),i.find(t.parentTrigger).children(t.triggerElement).on(d.CLICK_DATA_API,(function(i){const r=n.default(this);if("true"===r.attr("aria-disabled"))return;t.preventDefault&&"#"===r.attr("href")&&i.preventDefault();const s=r.parent(t.parentTrigger),a=s.siblings(t.parentTrigger),o=a.children(t.triggerElement);s.hasClass(h)?(r.attr("aria-expanded","false"),e.removeActive(s)):(r.attr("aria-expanded","true"),e.setActive(s),t.toggle&&(e.removeActive(a),o.attr("aria-expanded","false"))),t.onTransitionStart&&t.onTransitionStart(i)}))}setActive(e){n.default(e).addClass(h);const t=n.default(e).children(this.config.subMenu);t.length>0&&!t.hasClass(f)&&this.show(t)}removeActive(e){n.default(e).removeClass(h);const t=n.default(e).children(`${this.config.subMenu}.${f}`);t.length>0&&this.hide(t)}show(e){if(this.transitioning||n.default(e).hasClass(c))return;const t=n.default(e),r=n.default.Event(d.SHOW);if(t.trigger(r),r.isDefaultPrevented())return;if(t.parent(this.config.parentTrigger).addClass(h),this.config.toggle){const e=t.parent(this.config.parentTrigger).siblings().children(`${this.config.subMenu}.${f}`);this.hide(e)}t.removeClass(u).addClass(c).height(0),this.setTransitioning(!0);t.height(e[0].scrollHeight).one(i.TRANSITION_END,(()=>{this.config&&this.element&&(t.removeClass(c).addClass(`${u} ${f}`).height(""),this.setTransitioning(!1),t.trigger(d.SHOWN))})).mmEmulateTransitionEnd(350)}hide(e){if(this.transitioning||!n.default(e).hasClass(f))return;const t=n.default(e),r=n.default.Event(d.HIDE);if(t.trigger(r),r.isDefaultPrevented())return;t.parent(this.config.parentTrigger).removeClass(h),t.height(t.height())[0].offsetHeight,t.addClass(c).removeClass(u).removeClass(f),this.setTransitioning(!0);const s=()=>{this.config&&this.element&&(this.transitioning&&this.config.onTransitionEnd&&this.config.onTransitionEnd(),this.setTransitioning(!1),t.trigger(d.HIDDEN),t.removeClass(c).addClass(u))};0===t.height()||"none"===t.css("display")?s():t.height(0).one(i.TRANSITION_END,s).mmEmulateTransitionEnd(350)}setTransitioning(e){this.transitioning=e}dispose(){n.default.removeData(this.element,s),n.default(this.element).find(this.config.parentTrigger).children(this.config.triggerElement).off(d.CLICK_DATA_API),this.transitioning=null,this.config=null,this.element=null}static jQueryInterface(e){return this.each((function(){const t=n.default(this);let i=t.data(s);const r={...l,...t.data(),..."object"==typeof e&&e?e:{}};if(i||(i=new m(this,r),t.data(s,i)),"string"==typeof e){if(void 0===i[e])throw new Error(`No method named "${e}"`);i[e]()}}))}}return n.default.fn[r]=m.jQueryInterface,n.default.fn[r].Constructor=m,n.default.fn[r].noConflict=()=>(n.default.fn[r]=o,m.jQueryInterface),m}));
